<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.memo.post.mapper.PostMapper">
	<select id="selectPostList" resultType="map">
	SELECT
		*
	FROM
		`post`
	</select>
	
	<!-- userId로 post select -->
	<select id="selectPostListByUserId" resultType="com.memo.post.domain.Post">
	SELECT
		`id`
		,`userId`
		,`subject`
		,`content`
		,`imagePath`
		,`createdAt`
		,`updatedAt`
	FROM
		`post`
	WHERE
		`userId` = #{userId}
	</select>
	
	<!-- post insert -->
	<insert id="insertPost">
	INSERT INTO `POST`
	(
		`userId`
		,`subject`
		,`content`
		,`imagePath`
		,`createdAt`
		,`updatedAt`
	)
	VALUES
	(
		#{userId}
		, #{subject}
		, #{content}
		, #{imagePath}
		, NOW()
		, NOW()
	)
	</insert>
	
	<!-- id+userId 로 select -->
	<select id="selectPostByPostIdUserId" resultType="com.memo.post.domain.Post" parameterType="map">
	SELECT
		`id`
		,`userId`
		,`subject`
		,`content`
		,`imagePath`
		,`createdAt`
		,`updatedAt`
	FROM
		`post`
	WHERE
		`userId` = #{userId}
		AND `id` = #{postId}
	</select>
</mapper>